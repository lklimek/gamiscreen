{
  # Keep defaults; no admin API
  # Optional: disable Automatic HTTPS redirect configuration here if needed
}

# Serve HTTPS with a self-signed internal CA for the chosen hostname
{$CERT_CN:localhost}, localhost {
  tls internal
  encode zstd gzip

  # Proxy all requests to the Rust server
  reverse_proxy http://gamiscreen-server:5151
}

# Redirect HTTP to HTTPS
http://{$CERT_CN:localhost}, http://localhost {
  redir https://{$CERT_CN:localhost}{uri}
}

